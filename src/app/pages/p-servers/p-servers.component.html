<div class="flex flex-col justify-between h-full">
    <div class="flex-grow px-6 overflow-y-auto flex-shrink-0">
        <div class="flex flex-row space-x-2">
            <app-btn-comp (btn_func)="get_clients()" btn_str="Get all connection"></app-btn-comp>
            <app-btn-comp (btn_func)="get_storage_all()" btn_str="Get all storage"></app-btn-comp>
        </div>

        <div class="py-2"></div>

        <div class="w-fit border border-gray-300 rounded-md">

            <table>
                <thead class="divide-y border-b-gray-300 border-b">
                    <tr>
                        <th class="w-[40px] border-slate-500 font-medium py-2">No</th>
                        <th class="w-[200px] border-x border-gray-300 font-medium">Client ID</th>
                        <th class="w-[300px] border-x border-gray-300 font-medium">Overall Storage</th>
                        <th class="w-[200px] border-x border-gray-300 font-medium border-r-0">Action</th>
                    </tr>
                </thead>

                <tbody class="">
                    <tr *ngFor="let item of arr_connection, index as i" (click)="set_act_server(item['device_id'])"
                        [ngClass]="{'bg-blue-500/10':item['device_id'] == act_server}">
                        <td class="border-x px-3 border-gray-300 border-l-0 ">
                            <p class="flex py-2 justify-center">{{ i+1 }}</p>
                        </td>

                        <td class="border-x px-3 border-gray-300">
                            <p class=""> {{item['device_id']}}</p>
                        </td>

                        <td class="border-x px-3 border-gray-300">
                            <div class="w-full flex justify-center items-center flex-col text-sm">
                                <div *ngIf="item['summary_storage'] == null">
                                    <p>Null</p>
                                </div>


                                <div *ngIf="item['summary_storage'] != null"
                                    class="w-full flex justify-center items-center flex-col">
                                    <p>{{item['summary_storage']}}%</p>

                                    <div class="w-[90%] h-2 bg-gray-200 rounded-full overflow-hidden">
                                        <div [style.width.%]="item['summary_storage']" [class]="'bg-blue-500 h-2'">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </td>

                        <td class="">
                            <div class="flex justify-center items-center">
                                <app-btn-comp btn_str="View Storage" (btn_func)="get_storage(item['device_id'])"
                                    btn_custom="text-[12px] tracking-wide rounded-[4px]"></app-btn-comp>
                            </div>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>

        <div class="my-20"></div>

    </div>

    <div [ngClass]="{'h-[80vh]':bool_detail_expand}"
        class="h-[50vh] flex-shrink-0 border-t border-gray-800 w-full relative transition-all">
        <div class="h-full overflow-y-scroll">
            <button class="absolute right-[50%] translate-y-[-50%] bg-white p-1 rounded-md px-6 border border-gray-300 "
                (click)="bool_detail_expand = !bool_detail_expand">Expand</button>
            <div *ngIf="act_server != null">
                <app-c-server-storage [attr.key]="act_server" [inp_device_id]="act_server"></app-c-server-storage>
            </div>

            <div class="py-10"></div>
        </div>

    </div>


</div>